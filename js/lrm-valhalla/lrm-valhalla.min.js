!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function corslite(url,callback,cors){function isSuccessful(status){return status>=200&&status<300||304===status}function loaded(){void 0===x.status||isSuccessful(x.status)?callback.call(x,null,x):callback.call(x,x,null)}var sent=!1;if(void 0===window.XMLHttpRequest)return callback(Error("Browser not supported"));if(void 0===cors){var m=url.match(/^\s*https?:\/\/[^\/]*/);cors=m&&m[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var x=new window.XMLHttpRequest;if(cors&&!("withCredentials"in x)){x=new window.XDomainRequest;var original=callback;callback=function(){if(sent)original.apply(this,arguments);else{var that=this,args=arguments;setTimeout(function(){original.apply(that,args)},0)}}}return"onload"in x?x.onload=loaded:x.onreadystatechange=function(){4===x.readyState&&loaded()},x.onerror=function(evt){callback.call(this,evt||!0,null),callback=function(){}},x.onprogress=function(){},x.ontimeout=function(evt){callback.call(this,evt,null),callback=function(){}},x.onabort=function(evt){callback.call(this,evt,null),callback=function(){}},x.open("GET",url,!0),x.send(null),sent=!0,x}void 0!==module&&(module.exports=corslite)},{}],2:[function(require,module,exports){"use strict";function py2_round(value){return Math.floor(Math.abs(value)+.5)*Math.sign(value)}function encode(current,previous,factor){current=py2_round(current*factor),previous=py2_round(previous*factor);var coordinate=current-previous;coordinate<<=1,current-previous<0&&(coordinate=~coordinate);for(var output="";coordinate>=32;)output+=String.fromCharCode(63+(32|31&coordinate)),coordinate>>=5;return output+=String.fromCharCode(coordinate+63)}function flipped(coords){for(var flipped=[],i=0;i<coords.length;i++)flipped.push(coords[i].slice().reverse());return flipped}var polyline={};polyline.decode=function(str,precision){for(var latitude_change,longitude_change,index=0,lat=0,lng=0,coordinates=[],shift=0,result=0,byte=null,factor=Math.pow(10,precision||5);index<str.length;){byte=null,shift=0,result=0;do{byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5}while(byte>=32);latitude_change=1&result?~(result>>1):result>>1,shift=result=0;do{byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5}while(byte>=32);longitude_change=1&result?~(result>>1):result>>1,lat+=latitude_change,lng+=longitude_change,coordinates.push([lat/factor,lng/factor])}return coordinates},polyline.encode=function(coordinates,precision){if(!coordinates.length)return"";for(var factor=Math.pow(10,precision||5),output=encode(coordinates[0][0],0,factor)+encode(coordinates[0][1],0,factor),i=1;i<coordinates.length;i++){var a=coordinates[i],b=coordinates[i-1];output+=encode(a[0],b[0],factor),output+=encode(a[1],b[1],factor)}return output},polyline.fromGeoJSON=function(geojson,precision){if(geojson&&"Feature"===geojson.type&&(geojson=geojson.geometry),!geojson||"LineString"!==geojson.type)throw new Error("Input must be a GeoJSON LineString");return polyline.encode(flipped(geojson.coordinates),precision)},polyline.toGeoJSON=function(str,precision){return{type:"LineString",coordinates:flipped(polyline.decode(str,precision))}},"object"==typeof module&&module.exports&&(module.exports=polyline)},{}],3:[function(require,module,exports){(function(global){var L="undefined"!=typeof window?window.L:void 0!==global?global.L:null,valhallaRouter=require("./valhallaRouter"),valhallaLine=require("./valhallaLine"),valhallaFormatter=require("./valhallaFormatter"),valhallaWaypoint=require("./valhallaWaypoint");L.Routing=L.Routing||{},L.routing=L.routing||{},L.Routing.valhalla=valhallaRouter,L.Routing.valhallaLine=valhallaLine,L.Routing.valhallaFormatter=valhallaFormatter,L.Routing.valhallaWaypoint=valhallaWaypoint,L.routing.valhalla=function(n,e){return new valhallaRouter(n,e)},L.routing.valhallaLine=function(n,e){return new valhallaLine(n,e)},L.routing.valhallaFormatter=function(n){return new valhallaFormatter(n)},L.routing.valhallaWaypoint=function(n,e,t){return new valhallaWaypoint(n,e,t)},L.Routing.valhalla=L.routing.valhalla,L.Routing.valhallaLine=L.routing.valhallaLine,L.Routing.valhallaFormatter=L.routing.valhallaFormatter,L.Routing.valhallaWaypoint=L.routing.valhallaWaypoint}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./valhallaFormatter":4,"./valhallaLine":5,"./valhallaRouter":6,"./valhallaWaypoint":7}],4:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=t.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mÃ­n",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(e){t.setOptions(this,e)},formatDistance:function(e){var r,n,a=this.options.unitNames;return"imperial"===this.options.units?(e*=1e3,e/=1.609344,n=e>=1e3?{value:this._round(e)/1e3,unit:a.miles}:{value:this._round(e/1.76),unit:a.yards}):(r=e,n={value:r>=1?r:1e3*r,unit:r>=1?a.kilometers:a.meters}),t.Util.template(this.options.distanceTemplate,n)},_round:function(t){var e=Math.pow(10,(Math.floor(t/this.options.roundingSensitivity)+"").length-1),r=Math.floor(t/e),n=r>5?e:e/2;return Math.round(t/n)*n},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!=0?" "+t%60+" s":""):t+" s"},formatInstruction:function(t,e){return t.instruction},getIconName:function(t,e){switch(t.type){case 0:return"kNone";case 1:return"kStart";case 2:return"kStartRight";case 3:return"kStartLeft";case 4:return"kDestination";case 5:return"kDestinationRight";case 6:return"kDestinationLeft";case 7:return"kBecomes";case 8:return"kContinue";case 9:return"kSlightRight";case 10:return"kRight";case 11:return"kSharpRight";case 12:return"kUturnRight";case 13:return"kUturnLeft";case 14:return"kSharpLeft";case 15:return"kLeft";case 16:return"kSlightLeft";case 17:return"kRampStraight";case 18:return"kRampRight";case 19:return"kRampLeft";case 20:return"kExitRight";case 21:return"kExitLeft";case 22:return"kStayStraight";case 23:return"kStayRight";case 24:return"kStayLeft";case 25:return"kMerge";case 26:return"kRoundaboutEnter";case 27:return"kRoundaboutExit";case 28:return"kFerryEnter";case 29:return"kFerryExit";case 30:case 31:case 32:case 33:case 34:case 35:case 36:return t.edited_travel_type?"kTransit"+this._getCapitalizedName(t.edited_travel_type):"kTransit"}},_getInstructionTemplate:function(t,e){return t.instruction+" "+t.length},_getCapitalizedName:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=t.LayerGroup.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{styles:[{color:"white",opacity:.8,weight:8},{color:"#06a6d4",opacity:1,weight:6}],missingRouteStyles:[{color:"black",opacity:.15,weight:8},{color:"white",opacity:.6,weight:6},{color:"gray",opacity:.8,weight:4,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(i,e){if(t.setOptions(this,e),t.LayerGroup.prototype.initialize.call(this,e),this._route=i,this.options.extendToWaypoints&&this._extendToWaypoints(),i.subRoutes)for(var o=0;o<i.subRoutes.length;o++)i.subRoutes[o].styles||(i.subRoutes[o].styles=this.options.styles),this._addSegment(i.subRoutes[o].coordinates,i.subRoutes[o].styles,this.options.addWaypoints);else this._addSegment(i.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(t){return t.addLayer(this),this},getBounds:function(){return t.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var t,i=this._route.inputWaypoints,e=[];for(t=0;t<i.length;t++)e.push(this._findClosestRoutePoint(i[t].latLng));return e},_findClosestRoutePoint:function(t){var i,e,o,n=Number.MAX_VALUE;for(e=this._route.coordinates.length-1;e>=0;e--)(o=t.distanceTo(this._route.coordinates[e]))<n&&(i=e,n=o);return i},_extendToWaypoints:function(){var i,e,o,n=this._route.inputWaypoints,s=this._getWaypointIndices();for(i=0;i<n.length;i++)e=n[i].latLng,o=t.latLng(this._route.coordinates[s[i]]),e.distanceTo(o)>this.options.missingRouteTolerance&&this._addSegment([e,o],this.options.missingRouteStyles)},_addSegment:function(i,e,o){var n,s;for(n=0;n<e.length;n++)s=t.polyline(i,e[n]),this.addLayer(s),o&&s.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(t){for(var i=this._getWaypointIndices(),e=i.length-1;e>=0&&i[e]>t;)e--;return e},_onLineTouched:function(t){var i=this._findNearestWpBefore(this._findClosestRoutePoint(t.latlng));this.fire("linetouched",{afterIndex:i,latlng:t.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null,e=require("@mapbox/corslite"),n=require("@mapbox/polyline"),i=require("./valhallaWaypoint");module.exports=t.Class.extend({options:{serviceUrl:"https://valhalla.valhalla.com/route?",timeout:3e4},initialize:function(e,n){t.Util.setOptions(this,n),this.options.routingOptions={};for(var i in n)"serviceUrl"===i&&"timeout"===i||(this.options.routingOptions[i]=n[i]);this._accessToken=e},route:function(n,r,o,s){var a,l,u,p,g=!1,c=[],h=t.extend(this.options.routingOptions,s);for(a=this.buildRouteUrl(n,h),l=setTimeout(function(){g=!0,r.call(o||r,{status:-1,message:"Time out."})},this.options.timeout),p=0;p<n.length;p++)u=n[p],c.push(new i(t.latLng(u.latLng),u.name||"",u.options||{}));return e(a,t.bind(function(t,e){var n;clearTimeout(l),g||(t?(console.log("Error : "+t.response),r.call(o||r,{status:t.status,message:t.response})):(n=JSON.parse(e.responseText),this._routeDone(n,c,h,r,o)))},this),!0),this},_routeDone:function(e,i,r,o,s){var a,l,u,p;if(s=s||o,0!==e.trip.status)return void o.call(s,{status:e.status,message:e.status_message});for(var g=[],a=[],c=0,p=0;p<e.trip.legs.length;p++){for(var h=n.decode(e.trip.legs[p].shape,6),v=0;v<h.length;v++)a.push(t.latLng(h[v][0],h[v][1]));for(var m=0;m<e.trip.legs[p].maneuvers.length;m++){var f=e.trip.legs[p].maneuvers[m];f.distance=e.trip.legs[p].maneuvers[m].length,f.index=c+e.trip.legs[p].maneuvers[m].begin_shape_index,g.push(f)}"multimodal"===r.costing&&(g=this._unifyTransitManeuver(g)),c+=e.trip.legs[p].maneuvers[e.trip.legs[p].maneuvers.length-1].begin_shape_index}u=this._toWaypoints(i,e.trip.locations);var _;"multimodal"==r.costing&&(_=this._getSubRoutes(e.trip.legs)),l=[{name:this._trimLocationKey(i[0].latLng)+" , "+this._trimLocationKey(i[i.length-1].latLng),unit:e.trip.units,costing:r.costing,coordinates:a,subRoutes:_,instructions:g,summary:e.trip.summary?this._convertSummary(e.trip.summary):[],inputWaypoints:i,outputWaypoints:u,actualWaypoints:u,waypointIndices:this._clampIndices([0,e.trip.legs[0].maneuvers.length],a)}],o.call(s,null,l)},_unifyTransitManeuver:function(t){for(var e,n=t,i=0;i<n.length;i++)if(30==n[i].type){e=n[i].travel_type;break}for(var r=0;r<n.length;r++)n[r].type>29&&(n[r].edited_travel_type=e);return n},_getSubRoutes:function(t){for(var e=[],i=0;i<t.length;i++){for(var r,o=n.decode(t[i].shape,6),s=[],a=0;a<t[i].maneuvers.length;a++){var l=t[i].maneuvers[a],u=l.travel_type;u===r&&31!==l.type||(l.begin_shape_index>0&&s.push(l.begin_shape_index),l.transit_info?e.push({travel_type:u,styles:this._getPolylineColor(l.transit_info.color)}):e.push({travel_type:u})),r=u}s.push(o.length);for(var p=0,g=0;g<s.length;g++){var c=[],h=0;g!==s.length-1&&(h=1);for(var v=p;v<s[g]+h;v++)c.push(o[v]);var m=c;p=s[g],e[g].coordinates=m}}return e},_getPolylineColor:function(t){var e=t>>16&255,n=t>>8&255,i=t>>0&255,r=.299*e+.587*n+.114*i,o=r>187,s=16777216|16777215&t,a=s.toString(16).substring(1,7);return[o?{color:"#000",opacity:.8,weight:8}:{color:"#fff",opacity:.8,weight:8},{color:"#"+a.toUpperCase(),opacity:1,weight:6}]},_toWaypoints:function(e,n){var r,o=[];for(r=0;r<n.length;r++){var s={};for(var a in n[r])"lat"!==a&&"lon"!==a&&(s[a]=n[r][a]);o.push(new i(t.latLng([n[r].lat,n[r].lon]),null,s))}return o},buildRouteUrl:function(e,n){for(var i=[],r=0;r<e.length;r++){var o={lat:e[r].latLng.lat,lon:e[r].latLng.lng};for(var s in e[r].options)e[r].options[s]&&(o[s]=e[r].options[s]);i.push(o)}var a=t.extend(n,{locations:i}),l=JSON.stringify(a);return this.options.serviceUrl+"json="+l+"&api_key="+this._accessToken},_locationKey:function(t){return t.lat+","+t.lng},_trimLocationKey:function(t){return t.lat,t.lng,Math.floor(1e3*t.lat)/1e3+" , "+Math.floor(1e3*t.lng)/1e3},_convertSummary:function(t){return{totalDistance:t.length,totalTime:t.time}},_convertInstructions:function(t){var e,n,i,r,o=[];for(e=0;e<t.length;e++)n=t[e],i=this._drivingDirectionType(n[0]),r=n[0].split("-"),i&&o.push({type:i,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:r.length>1?r[1]:void 0,index:n[3]});return o},_clampIndices:function(t,e){var n,i=e.length-1;for(n=0;n<t.length;n++)t[n]=Math.min(i,Math.max(t[n],0))}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./valhallaWaypoint":7,"@mapbox/corslite":1,"@mapbox/polyline":2}],7:[function(require,module,exports){(function(global){!function(){"use strict";var l="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=l.Class.extend({options:{type:null,name:null,haeding:null,heading_tolerance:null,street:null,way_id:null,minimum_reachability:null,radius:null},initialize:function(n,i,t){l.Util.setOptions(this,t),this.latLng=l.latLng(n),this.name=i}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3,4,5,6,7]);
